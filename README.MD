=== Realbig For WordPress ===
Contributors: 101
Tags: AD, content filling
Requires at least: 4.5
Tested up to: 6.5.3
Stable tag: 0.1.26.56
Requires PHP: 5.6
License: GPLv2 or later
License URI: https://www.gnu.org/licenses/gpl-2.0.html

Плагин для монетизации от RealBig.media

== Description ==

Плагин realBIG for WordPress от RealBig.media позволяет выводить рекламу на сайтах на CMS WP. Плагин работает только для вывода рекламы через сервис [RealBig.media](https://realbig.media), сторонние коды подгружать нельзя.

Плагин realBIG for WP даёт широкие возможности для позиционирования рекламных блоков в контенте сайта.

Имеет функцию кеширование рекламных объявлений, что обеспечивает стабильную открутку рекламы на сайте.

За всеми новостями, обновлениями и улучшениями следите на нашем [телеграмм канале](https://t.me/realbigmediachannel).

Присоединяйтесь и к [нашему чату](https://t.me/RealBigMedia), в котором можно получить ответ от техподдержки или просто пообщаться с единомышленниками.

Актуальная версия 0.4.1 и выше плагина РБ автоматически подтянет и заменит все коды рекламных блоков на новые.

== Installation ==

Установка и настройка плагина

Настройки в сервисе RealBig.media:

* Зарегистрировать сайт в сервисе [RealBig.media](https://realbig.media);
* Создать и настроить рекламный блок на вкладке «Сайты» сервиса RealBig.media;
* Настроить созданный блок к выводу плагином (вкладка «WP плагин» сервиса RealBig.media);
* Скопировать сгенерированный токен для вашего сайта в этой же вкладке («WP плагин» сервиса RealBig.media);
* Вставить и синхронизировать токен в админке вашего сайта.

Активация и настройки плагина со стороны сайта:

* После загрузки плагина, активируйте его на вашем сайте;
* После во вкладке плагина realBIG вставьте полученный токен для вашего сайта (вкладка «WP плагин» сервиса RealBig.media) в поле «Токен» и синхронизируйте.

[Подробные инструкции по установке и настройке плагина](https://realbig.media/support/plagin-dlya-wordpress/podklyuchenie-plagina.html)

== Frequently Asked Questions ==

= Возникла ошибка при синхронизации: “You have no configured blocks for this site”. =

Для решения ошибки нужно настроить вывод рекламного блока на вкладке «WP плагин» сервиса RealBig.media, предварительно создав и настроив блок рекламы на вкладке «Сайты» сервиса RealBig.media.

= Синхронизация прошла успешно “success”, но настроенные к выводу блоки не отобразились на сайте. =

После синхронизации плагина realBIG for WP нужно дополнительно очистить кеш вашего сайта (также установленных плагинов для кеширования) и проверить настройки для рекламных объявлений выводимого блока во вкладке «Сайты» сервиса RealBig.media.

== Arbitrary section ==

Подробные инструкции для вывода плагином находятся
в [FAQ](https://realbig.media/support/plagin-dlya-wordpress/nastroyki-vyvoda-plaginom.html) сервиса RealBig.media
[Техническая поддержка](https://t.me/mappotRealBigMedia) сервиса

Основные статусы синхронизации:

* success — успех, все исполнено удачно;
* no changes from last sync — с момента последней синхронизации настройки для плагина не изменялись (срабатывает только при автосинхронизации);
* no token — отправлен (получен) пустой токен;
* wrong token — неверный токен;
* You have no configured blocks for this site — нету настроек для плагина по этому токену;
* ошибка запроса на сервер — получен не «POST» запрос;
* ошибка соединения — нет ответа от RealBIG.media;
* unexpected error — любая другая ошибка;

Значения настроек блока:

1. «Блок» — название блока, настроенного во вкладке «Сайты»
2. «Тип отображения» — выбор принципа позиционирования блока на вашем сайте
    * «Одиночный блок» — блок позиционируется относительно html-тега
    * «Конкретный элемент» — блок позиционируется по id или class элемента
    * «В середине контента» — блок ставится по средине контента, относительно количества абзацев
    * «В конце контента» — блок ставится в конце текста, до комментариев (зависит от темы или других настроек WordPress)
    * «В процентах» — блок ставится после заданного количества процентов контента страницы
    * «В символах» — блок ставится после заданного количества символов контента страницы
3. «Тег» — html-тег элемента, возле которого ставится реклама («р» — абзац, «h1-h2» — заголовки и тд.)
4. «Позиция тега» — позиционирование блока до или после выбранного тега
5. «Место тега» — выбор номера тега по счету, относительно которого вставляется блок. При положительном значении считает теги с начала контента до конца, при отрицательном значении - блоки с конца контента
6. «Конкретный элемент» — название id/class элемента возле которого ставится блок (писать в форматах «#названиеид/.названиекласса»)
7. «Минимум символов» — минимальное количество символов, которое должно быть в контенте, чтобы блок отображался (0 или пусто — без ограничений)
8. «Минимум заголовков» — минимальное количество заголовков (h1-h6), которое должно быть в контенте, чтобы блок отображался, основной заголовок тоже учитывается (0 или пусто — без ограничений)
9. «Активный» (checkbox) — активация или деактивация блока. Неактивные блоки не учитываются при синхронизации
10. «Удалить» — удаление настроек для блока

Поля:

* «Добавить скрипт для PUSH в head сайта» (checkbox) — при включении, после сохранения и синхронизации, плагин будет вставлять в Head сайта код, который нужен для работи PUSH;
* «Исключить главную страницу» (checkbox) — при включении, после сохранения и синхронизации, позволяет не отображать блоки на главной странице вашего сайта;
* «Необрабатываемые страницы» — список страниц на которых не будут отображаться рекламные блоки. При внесении нескольких исключённых страниц, их нужно разделять переходом на новую строку;
* «Исключённые типы страниц» (checkbox) —  активация или деактивация отображения рекламных блоков на разных типах страниц сайта;

Типы страниц:

* is_home() — обычно это главная страница сайта;
* is_front_page() — второй возможный статус главной;
* is_page() — страница "постоянной страницы";
* is_single() — страница любого типа записей кроме attachment и page;
* is_singular() — страница записи (поста, страницы, вложения, произвольный тип записи);
* is_archive() — любая из архивных страниц (категории, метки, автора, даты).

== Changelog ==

= 1.1.1 =

Изменения версии:

* вернули поддержку старых версий Wordpress (4.5);
* другие мелкие улучшения и правки.

= 1.1.0 =

Изменения версии:

* добавили возможность выбора отображения рекламы при меньшем количестве тегов;
* сделали вывод рекламы на сайтах с бесконечной прокруткой;
* другие мелкие улучшения и правки.

= 1.0.7 =

Изменения версии:

* добавили защиту от CSRF.

= 1.0.6 =

Изменения версии:

* мелкие улучшения и правки.

= 1.0.5 =

Изменения версии:

* улучшили защиту плагина.

= 1.0.4 =

Изменения версии:

* спрятали под аккордеон проблему последней деактивации спустя неделю после ошибки;
* исправили ошибку в админке при включенном плагине.

= 1.0.3 =

Изменения версии:

* исправили ошибку с автосинхронизацией плагина для litespeed серверов;
* другие мелкие улучшения и правки.

= 1.0.2 =

Изменения версии:

* исправили работу плагина для старых версий Wordpress 5.5 и меньше;
* другие мелкие улучшения и правки.

= 1.0.1 =

Изменения версии:

* исправили функционал исключения страниц для доменов с кириллическими символами;
* изменили вывод стилей на странице плагина.
 
= 1.0 =

Изменения версии:

* обновили функционал страницы плагина в админке;
* уменьшили количество синхронизаций, если длительное время нет изменений настроек плагина;
* сделали возможность включения/отключения сбора логов;
* другие мелкие улучшения и правки.

= 0.4.4 =

Изменения версии:

* исправили проблему с добавлением рекламных блоков в статье по символам и процентам при использовании плагина Elementor;
* сократили количество запросов к файлу admin-ajax.php;
* другие мелкие улучшения и правки.

= 0.4.3 =

Изменения версии:

* исправили ошибки при минификации js скриптов плагина;
* другие мелкие улучшения и правки.

= 0.4.2 =

Изменения версии:

* улучшили кеширование рекламы в плагине (улучшили определение планшета);
* улучшили работу нашего плагина с плагином WPRocket.

= 0.4.1 =

Изменения версии:

* автоматически заменяет ваш код для вставки рекламы от РБ на актуальный;
* сделали возможность выбора нестандартных таксономий, которые будут использоваться для получения категорий и тегов.

= 0.4.0.2 =

Изменения версии:

* исправили проблему возникающую у некоторых пользователей при синхронизации.

= 0.4.0.1 =

Изменения версии:

* исправили проблему с синхронизацией версии 0.4.0;
* подправили работу локального ротатора, если есть рекламные блоки с isStatic.

= 0.4.0 =

Изменения версии:

* подготовили возможность генерации турбо rss;
* подготовили возможность добавлять рекламу на amp страницах;
* Подправили очистку кэша;
* Изменили получение актуального кода скрипта для рекламы;
* Исправили ошибки, связанные с отступами и мультисайтами.

= 0.3.9 =

Плагин РБ автоматически выводить общий скрипт пушей.

Сейчас в настройках кабинета РБ доступен один скрипт для всех пушей, web подписки, нативного пуша и iOS календарь.
Для того, чтобы плагин подтянул общий скрипт пушей нужно поставить галочку "Добавить скрипт пушей и iOS календаря в head сайта" на странице «WP-плагин» в настройках сайта . Для новых сайтов, добавленных в РБ и активировав плагин - галочка в настройках уже стоит по умолчанию.

Добавили возможность исключать вывод рекламных блоков на странице с ошибкой 404.
В настройках плагина РБ вы можете выбрать "Показывать" или "НЕ показывать" рекламные блоки на странице с ошибкой 404.

Добавили автоматическую очистку плагином РБ кэша в кэш-плагинах:

* liteSpeed
* wpFastestCache
* autoptimize
* wpSuperCache
* w3TotalCache

Для активации нужно выбрать чекбокс "Очистить кэш" в админке WP в настройках плагина РБ. Очистка кэша работает при следующей синхронизации плагина РБ.

Изменили в WP иконку настроек плагина.

Улучшили вывод на уникальных страницах и в рубриках

Была полностью переделана и улучшена вставка отступов.
При выводе плагином РБ убирается отступ между рекламным блоком и элементом тега, до/после которого выводится рекламный блок.
Если поставить галочку "Обязательный отступ", то плагин отступ НЕ убирает и оставляет.

Добавили чекбокс «Все скрипты плагина в хедере» в настройках сайта.
Эта настройка нужна для сайтов темы которых режут функционал плагина, вырезая js коды из футера. Активация настройки позволит вставить все коды в хедер, восстановить нормальную работу плагина. Настройка нужно только для определенных тем Wordpress!

Улучшили работу с локальным ротатором

Актуальная версия 0.3.8 и выше плагина РБ автоматически подтянет и заменит все коды рекламных блоков на новые (новые рекламные блоки с cnt_rb).

= 0.3.8 =

Изменения версии:

* Добавлен альтернативный способ загрузки ротатора, это позитивно скажется на скорости отгрузки рекламы;
* Убрали проблему с библиотекой обновления гит версии плагина, у некоторых пользователей были проблемы с обновлением;
* Убрали проблему с отображением повторяющегося шорткода, раньше выводился только первый вставленный, сейчас может работать большое количество повторяющихся шорткодов;
* Улучшили вывод рекламы для страниц без текстового контента, например, галерии картинок. Мы автоматически определяем айди или класс контента для отображения рекламы на этих страницах, для управления процессом можно добавить в поле исключения для айди и классов, те которые нужно запретить определять, как контент. В случае «сложных страниц» (страниц на которых не просто определить контент, из-за отсутствия текстового контента), выводится будут только блоки тип «по селектору». Тип «одиночный», «простой», «повторяющийся» - выводится не будут;
* Другие улучшения работы плагина и ротатора.

= 0.3.7 =

Новая версия плагина, автоматически поменяет ваш код для вставки рекламы от РБ.

= 0.3.6 =

Новые фишки и особенности:

* Добавили новый тег "iframe", для типов отображения "Простой" и "Повторяющийся", чтобы была возможность настроить вывод блока ещё подробнее.
* Добавили возможность выбирать, для вставок с помощью плагина, будут влиять общие настройки вывода по сайту с помощью плагина, или нет. Раньше, общие настройки вывода по сайту с помощью плагина можно было применить только для настроек вывода блоков, но никак не для настроек вывода вставок.
* Улучшили функционал для типа отображения "Повторяющийся". Теперь, он будет вставлять блок и в случае, если нет достаточного количества тегов. Будут заполняться только те места которые имеются по факту и подходят под условие вывода.

Провели оптимизацию:

* Работы крона, а именно уменьшили количество инициализаций и функций, без потери функционала, что позволит вам уменьшить нагрузку на сервер.
* Обращения к БД, что уменьшит нагрузку на базу данных.

Пофиксили:

* Баг при выборе типа отображения "Простой" - "В символах", собственно в расчете количества символов. Теперь, количество символов подсчитывается корректно и в случае большой глубины блоков сайта.
* Баг при выводе шорткодов. Теперь, когда у вас будет установлен другой плагин с настройкой шорткодов, не будет возникать конфликта между плагинами.
* Баг связанный с базой данных, когда в результате проверки существующих таблиц возникали проблемы с синхронизацией.
* Возникновение ряда багов, которые возникали при компрессии и оптимизации нашего кода.
* Ряд багов, которые возникали при использовании 3 плагинов на сайте, а именно Autoptimize + W3 Total Cache + Realbig.

= 0.3.5 =

Изменения версии:

* исправили баг с деактивацией плагина при обновлении;
* пофиксили баг с лапками " ", ' ' если на сайте выводиться кэш;
* добавили автосинхронизацию при изменении настроек вывода рекламных блоков в меню "WP-плагин" → "Настройки"
* модифицировано функционал для автопереименования папки с плагином RealBig, теперь ошибки при активации не возникает;
* добавили управление для дополнительного функционала: логирование процесса работы со стороны RealBig;
* пофиксили баг с выводом рекламных блоков до/после h1;
* ввели единый вид записи class и id для "Типа отображения" - "Селектор" (конкретный элемент):
    * для class перед указанием атрибута нужно ставить точку ".";
    * при указании двух и более атрибутов class в настройках вывода блока, например,"class="site-content container"", нужно поставить вместо пробела точку ".site-content.container";
    * для id перед указанием атрибута нужно ставить решетку "#";
    * сделали возможным вывод кэша рекламных блоков с вставленным скриптом ротатора вручную (не плагином).

= 0.3.4 =

Правки с пропавшими блоками.

= 0.3.3 =

Правки версии 0.3.0.

= 0.3.0 =

Изменения версии:

* значительно ускорили синхронизацию изменений на сайте;
* улучшили распознавание обтекаемых картинок, раньше если в абзаце была обтекаемая картинка могла быть поломана верстка, сейчас реклама будет смещена до обтекания;
* проделали работу над JavaScript,том который отвечает за вставку рекламы;
* улучшили функционал исключения типа страниц, теперь можно игнорировать специфические страницы на которых была вставка контента без статьи;
* убрали предупреждение, которое появлялось на страницу, если длинна статьи была больше, чем может обработать регулярное выражение;
* улучшили функционал для исключения id и class.

= 0.2.9 =

Для борьбы с AdBlock, папка с плагином будет автоматически переименовываться. Обратите внимание, некоторые плагины могут запретить такое действие, потому после обновления необходимо проверить активировался ли плагин.

= 0.2.8 =

Изменения версии:

* переделан функционал вывода (on/off) категорий и тэгов, теперь теги и категории будут подтягиваться с вашего сайта;
* переделана функция для вставок кодов в хедер (касается отдельных, уникальных тем wordpress);
* добавлен функционал, позволяющий выводить рекламу в описании категорий и архивов (речь про стандартные категории)
* улучшен вывод шорткодов, реализована возможность выводить шорткоды в липких окнах, fallen блоках и небоскрёбах;
* улучшен функция запрета вывода блоков;
* расширен функционал для вставки в хедер, теперь плагин может вставлять код для нативных пушей;
* убрали найденные проблемы с выводом закешированной рекламы;
* другие мелкие улучшения и правки.

= 0.2.7 =

Правки для версии 0.2.6

= 0.2.6 =

Изменения версии:

* изменены некоторые принципы вставки кэша (моменты активации);
* фикс для бага в шорткодах, когда после активированной версии шорткода ротатор добавлял голый код;
* добавлено несколько точек для логирования ошибок;
* добавлено функционал для логирования рабочего процесса;
* фикс бага, когда реклама "в конце контента" вставлялась на внешний слой и ломала верстку;
* глобальная модернизация работы плагина;
* другие фиксы и правки.

= 0.2.5 =

Добавили кнопку, которая переименовывает папку с плагином.

Данная функция нужна для устранения проблемы с адблоком.

= 0.2.4 =

Некоторые изменения в логике работы размещения рекламы по символам. (Перестали учитывать символы в таблицах и списках).

= 0.2.1 =

Изменения версии:

* добавлена возможность убрать дублирование блоков;
* добавлен функционал для вставки повторяющегося блока;
* добавлена возможность выбирать горизонтальную позицию блока (лево, право,центр);
* добавлено логирование ошибок;
* исправлено несколько случаев несовместимости с некоторыми сео-плагинами;
* исправлен баг, когда при использовании припаркованного домена для пушей, который вставлен вручную, дублировался код пушей;
* множество фиксов, изменений и улучшений в плагине.

= 0.2 =

Первая стабильная версия.

== Upgrade Notice ==

= 0.1.26.05 =

Добавлена возможность генерировать таблицу в БД вручную для тех, у кого она не генерируется автоматом;

